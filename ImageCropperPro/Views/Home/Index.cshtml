@{
    ViewData["Title"] = "Image Cropper";
}
<link href="~/lib/cropper.min.css" rel="stylesheet" />
<style>
    #upload-area {
        border: 2px dashed #007bff;
        border-radius: 8px;
        padding: 40px;
        text-align: center;
        color: #888;
        margin-bottom: 20px;
        cursor: pointer;
        background: #f8f9fa;
    }
    #upload-area.dragover {
        background: #e3f2fd;
        border-color: #0056b3;
    }
    #preview-container {
        display: none;
        margin-top: 20px;
    }
    #preview {
        max-width: 100%;
        max-height: 400px;
    }
</style>
<div class="container mt-4">
    <h2>Image Upload & Cropper</h2>
    <div id="upload-area">
        <span>Drag & drop an image here, or <label for="file-input" style="color:#007bff;cursor:pointer;">browse</label></span>
        <input type="file" id="file-input" accept="image/jpeg,image/png,image/gif,image/webp" style="display:none;" />
        <div id="upload-error" class="text-danger mt-2"></div>
    </div>
    <div id="preview-container">
        <img id="preview" src="#" alt="Preview" />
        <div class="mt-2">
            <button id="crop-btn" class="btn btn-primary">Crop & Preview</button>
        </div>
        <div id="cropper-controls" class="mt-3" style="display:none;">
            <label>Width: <input type="number" id="crop-width" min="1" style="width:80px;" /></label>
            <label>Height: <input type="number" id="crop-height" min="1" style="width:80px;" /></label>
            <select id="unit-select">
                <option value="px">px</option>
                <option value="mm">mm</option>
                <option value="cm">cm</option>
                <option value="in">in</option>
            </select>
            <label><input type="checkbox" id="lock-aspect" checked /> Lock aspect ratio</label>
            <button id="undo-btn" class="btn btn-secondary btn-sm">Undo</button>
            <button id="redo-btn" class="btn btn-secondary btn-sm">Redo</button>
            <button id="rotate-btn" class="btn btn-secondary btn-sm">Rotate</button>
            <button id="flip-btn" class="btn btn-secondary btn-sm">Flip</button>
            <select id="preset-select" class="ml-2">
                <option value="">Preset</option>
                <option value="a4">A4 Paper</option>
                <option value="banner">Social Media Banner</option>
            </select>
        </div>
        <div id="cropped-preview-container" class="mt-4" style="display:none;">
            <h5>Cropped Preview</h5>
            <img id="cropped-preview" src="#" alt="Cropped Preview" />
            <div class="mt-2">
                <label>Format:
                    <select id="output-format">
                        <option value="jpeg">JPEG</option>
                        <option value="png">PNG</option>
                        <option value="webp">WEBP</option>
                    </select>
                </label>
                <label>Quality: <input type="range" id="output-quality" min="0.1" max="1" step="0.01" value="0.92" /></label>
                <button id="download-btn" class="btn btn-success">Download</button>
            </div>
        </div>
    </div>
</div>
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/cropper.min.js"></script>
<script src="~/js/image-cropper.js"></script>
